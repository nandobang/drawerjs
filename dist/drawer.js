Drawer={ls:localStorage,identifier:"",cache:{},init:function(a){this.identifier=a,this.ls.getItem(this.identifier)||(this.cache={},this.writeToStorage()),this.readFromStorage()},find:function(a,b){return this.cache[b]?this.cache[b][a]:void console.error("Collection `%s` does not exist.",b)},where:function(a,b){if(!this.cache[b])return void console.error("Collection `%s` does not exist.",b);return this.cache[b].filter(function(b){for(var c=!0,d=0;d<a.length;d++){var e,f=a[d],g=Object.keys(f)[0],h=Object.keys(f[g])[0],i=Object.keys(f[g][h])[0],j=f[g][h][i];"eq"==i?e=b[h]==j:"neq"==i?e=b[h]!=j:"lt"==i?e=b[h]<j:"leq"==i?e=b[h]<=j:"gt"==i?e=b[h]>j:"geq"==i&&(e=b[h]>=j),0===d?c=e:"and"==g?c=c&&e:"or"==g&&(c=c||e)}return c})},create:function(a,b){if(!this.cache[b])return void console.error("Collection `%s` does not exist.",b);var c=parseInt(Object.keys(this.cache[b]).reverse()[0])+1;return a.createdAt=Date.now(),a.updatedAt=Date.now(),this.cache[b][c]=a,this.writeToStorage(),a},update:function(a,b,c){if(!this.cache[c])return void console.error("Collection `%s` does not exist.",c);if(!this.cache[c][a])return void console.error("Item with id `%s` does not exist.",a);for(var d in b)b.hasOwnProperty(d)&&(this.cache[c][a][d]=b[d]);return this.cache[c][a].updatedAt=Date.now(),this.writeToStorage(),tempItem},destroy:function(a,b){if(!this.cache[b])return void console.error("Collection `%s` does not exist.",b);if(!this.cache[b][a])return void console.error("Item with id `%s` does not exist.",a);var c=this.cache[b][a];return delete this.cache[b][a],this.writeToStorage(),c},readFromStorage:function(){this.cache=JSON.parse(this.ls.getItem(this.identifier))},writeToStorage:function(){this.ls.setItem(this.identifier,JSON.stringify(this.cache))}};